"use strict";angular.module("tripinApp",["ngRoute","ngFileUpload","ngCookies","ngAnimate","ngTouch","ui.bootstrap","ngMap","ngTable"]).config(function($routeProvider){$routeProvider.when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login",showLeftPanel:!1,AuthRequired:!1}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"vm",showLeftPanel:!1,AuthRequired:!1}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"vm",showLeftPanel:!0,AuthRequired:!0}).when("/adminHome",{templateUrl:"views/adminHome.html",controller:"AdminHomeCtrl",controllerAs:"vm",showLeftPanel:!0,AuthRequired:!0}).otherwise({redirectTo:"/login"})}).run(["$rootScope","$location","$cookieStore","$http",function($rootScope,$location,$cookieStore,$http){$rootScope.showLeftPanel=!1,$rootScope.$on("$routeChangeStart",function(event,next,current){$rootScope.showLeftPanel=next.showLeftPanel,$rootScope.loading=!0,next.AuthRequired&&!$rootScope.globals.currentUser&&$location.path("/login"),"/adminHome"===$location.path()&&"false"==$rootScope.globals.currentUser.admin&&$location.path("/login")}),$rootScope.globals=$cookieStore.get("globals")||{},$rootScope.globals.token&&($http.defaults.headers.common["x-access-token"]=$rootScope.globals.token),$rootScope.$on("$routeChangeSuccess",function(){$rootScope.loading=!1})}]);